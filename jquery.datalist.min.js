// HTML5 datalist plugin v.0.1
// Copyright (c) 2010-The End of Time, Mike Taylor, http://miketaylr.com
// MIT Licensed: http://www.opensource.org/licenses/mit-license.php

$.fn.datalist=function(){return this.length>0&&typeof this[0].list==="object"&&document.createElement("datalist")&&!!window.HTMLDataListElement?this:this.each(function(){var e=$(this),t=$("#"+e.attr("list")),n=$("option",t),r=e.width(),i=e.height(),s=$("<ul>",{"class":"datalist",width:r,css:{position:"absolute",left:0,top:i+6,margin:0,padding:"0 2px","list-style":"none",border:"1px solid #ccc","-moz-box-shadow":"0px 2px 3px #ccc","-webkit-box-shadow":"0px 2px 3px #ccc","box-shadow":"0px 2px 3px #ccc","z-index":99,background:"#fff",cursor:"default"}}),o=$("<div>").css("position","relative");if(!t.length){return this}else{n.each(function(e,t){$("<li>").append('<span class="value">'+t.value+"</span>").append('<span class="label" style="float:right">'+(t.label?t.label:"")+"</span>").appendTo(s)})}e.wrap(o);s.hide().insertAfter(e);e.focus(function(){$("li",s).css("display","block");s.show()});e.blur(function(){s.hide()});$("li",s).mousedown(function(){var t=$("span.value",this).text();e.val(t)});e.keyup(function(t){var n=$("li",e.next());n.each(function(t,n){var r=$("span.value",n),i=$("span.label",n);if(r.text().toLowerCase().indexOf(e.val().toLowerCase())>-1||i.text().toLowerCase().indexOf(e.val().toLowerCase())>-1){$(n).css("display","block")}else{$(n).css("display","none")}})})})}
